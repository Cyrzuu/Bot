[null,{"name":"reactionStart","temp":"","event-type":"0","_id":"Lwriz","actions":[{"behavior":"3","name":"Run Action Sequence Once"},{"code":"const _this = this;\nconst fs = require('fs');\n\n//Settings\nconst dmUserAfter = false; // Default, can be changed to false\nvar messageSentAdd = 'Successfully added the role {rolename} in {server}';\nvar messageSentRemove = 'Successfully removed the role {rolename} in {server}';\n// The only variables that work rn, {rolename} and {server}\n\n\nif(fs.existsSync('./data/reactionRoleData.json')) {\n    fs.readFile('./data/reactionRoleData.json', function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        data = JSON.parse(data)\n    \n        _this.storeValue(data, 3, 'reactionRoleInf', cache);\n    });\n} else {\n    fs.writeFile(\"./data/reactionRoleData.json\", \"{}\", function(err) {\n        if(err) {\n            return console.log(err);\n        }\n    });\n    _this.storeValue({}, 3, 'reactionRoleInf', cache);\n}\n\nclient.on('raw', packet => {\n    if (!['MESSAGE_REACTION_ADD', 'MESSAGE_REACTION_REMOVE'].includes(packet.t)) return;\n    const channel = client.channels.get(packet.d.channel_id);\n    if (channel.messages.has(packet.d.message_id)) return;\n    channel.fetchMessage(packet.d.message_id).then(message => {\n        const emoji = packet.d.emoji.id ? `${packet.d.emoji.name}:${packet.d.emoji.id}` : packet.d.emoji.name;\n        const reaction = message.reactions.get(emoji);\n        const reactionUser = client.users.get(packet.d.user_id);\n        if (reaction) reaction.users.set(packet.d.user_id, reactionUser);\n        if (!reactionUser.bot) {\n            if (packet.t === 'MESSAGE_REACTION_ADD') {\n                client.emit('messageReactionAdd', reaction, reactionUser);\n            }\n            if (packet.t === 'MESSAGE_REACTION_REMOVE') {\n                client.emit('messageReactionRemove', reaction, reactionUser);\n            }\n        }\n    });\n});\n\nclient.on('messageReactionAdd', async function(reaction, user) {\n    if (!user.bot) {\n        const reactionData = globalVars(\"reactionRoleInf\");\n        const reactionGuild = reaction.message.guild;\n        const reactionMessage = reaction.message;\n        if (reactionData.hasOwnProperty(reactionMessage.id)) {\n            var emojiName = reaction.emoji.name;\n            var roleInData = reactionData[reactionMessage.id].filter(re => re[0] == emojiName || re[0].name == emojiName)\n            if (roleInData.length != 0) {\n                var guilduser = await reactionGuild.fetchMember(user);\n                var roleData = roleInData[0][1];\n                var reactionRole = await reactionGuild.roles.get(roleData);\n                if (!guilduser.roles.has(roleData)) {\n                    guilduser.addRole(reactionRole);\n\n                    if (dmUserAfter){guilduser.send(messageSentAdd.replace(\"{rolename}\",`**${reactionRole.name}**`).replace(\"{server}\",`**${reactionGuild.name}**`));}\n                }\n            }\n        }\n    }\n\n});\n\nclient.on('messageReactionRemove', async function(reaction, user) {\n    const reactionData = globalVars(\"reactionRoleInf\");\n    const reactionGuild = reaction.message.guild;\n    const reactionMessage = reaction.message;\n    if (reactionData.hasOwnProperty(reactionMessage.id)) {\n        var emojiName = reaction.emoji.name;\n        var roleInData = reactionData[reactionMessage.id].filter(re => re[0] == emojiName || re[0].name == emojiName)\n        if (roleInData.length != 0) {\n            var guilduser = await reactionGuild.fetchMember(user);\n            var roleData = roleInData[0][1];\n            var reactionRole = await reactionGuild.roles.get(roleData);\n\n            if (guilduser.roles.has(roleData)) {\n                guilduser.removeRole(reactionRole);\n                if (dmUserAfter){guilduser.send(messageSentRemove.replace(\"{rolename}\",`**${reactionRole.name}**`).replace(\"{server}\",`**${reactionGuild.name}**`));}\n            }\n        }\n    }\n});","behavior":"0","interpretation":"1","storage":"0","varName":"","VTypeSelect":"0","CVTypeValue":"","name":"Run Script"}]},{"name":"powitanie","temp":"member","event-type":"6","_id":"KRINDEX","actions":[{"info":"0","find":"610033599416369162","storage":"2","varName":"welcome-channel","name":"Find Channel"},{"server":"0","varName":"","info":"36","storage":"1","varName2":"member-count","name":"Store Server Info"},{"member":"2","varName":"member","info":"16","storage":"1","varName2":"avatarurl","name":"Store Member Info"},{"member":"2","varName":"member","info":"3","storage":"1","varName2":"member-displayname","name":"Store Member Info"},{"url":"resources/welcome-image.png","storage":"1","varName":"welcome","name":"Create Image"},{"storage":"1","varName":"welcome","width":"750","height":"250","name":"Resize Image"},{"url":"${tempVars(\"avatarurl\")}","storage":"1","varName":"avatar-image","name":"Create Image"},{"storage":"1","varName":"avatar-image","width":"200","height":"200","name":"Resize Image"},{"storage":"1","varName":"welcome","storage2":"1","varName2":"avatar-image","x":"10","y":"25","mask":"0","name":"Draw Image on Image"},{"storage":"1","varName":"welcome","x":"250","y":"100","font":"fonts/open-sans.fnt","width":"","text":"Witaj ${tempVars(\"member-displayname\")},","name":"Draw Text on Image"},{"storage":"1","varName":"welcome","x":"250","y":"135","font":"fonts/open-sans.fnt","width":"","text":"Jestes naszym ${tempVars(\"member-count\")} uzytkownikiem!","name":"Draw Text on Image"},{"storage":"1","varName":"welcome","channel":"6","varName2":"welcome-channel","message":"","name":"Send Image"}]},{"name":"Captcha","temp":"newmember","event-type":"6","_id":"LkIxk","actions":[{"comment":"Изображение и т.д","color":"#80ff00","name":"Comment"},{"channel":"5","varName":"newmember","message":"${tempVars(\"newmember\")} Пройдите проверку, переписав цифры с картинки.\nПример: 567987\nНа написание у вас есть 10 секунд, если вы не успеете вас кикнут с сервера.","storage":"1","varName2":"msg","iffalse":"0","iffalseVal":"","name":"Send Message"},{"storage":"1","varName":"asd","min":"1","max":"500","name":"Generate Random Number"},{"storage":"1","varName":"ads","min":"1","max":"500","name":"Generate Random Number"},{"storage":"1","varName":"random","min":"1","max":"999999","name":"Generate Random Number"},{"url":"https://cdn.discordapp.com/attachments/635498524204597288/655399118306541579/noise.jpg","storage":"1","varName":"1","name":"Create Image"},{"storage":"1","varName":"1","x":"${tempVars(\"asd\")}","y":"${tempVars(\"ads\")}","font":"fonts/Asimov.fnt","width":"11","text":"${tempVars(\"random\")}","name":"Draw Text on Image"},{"storage":"1","varName":"1","channel":"5","varName2":"newmember","message":"","name":"Send Image"},{"comment":"Основная часть","color":"#80ff00","name":"Comment"},{"member":"2","varName":"newmember","info":"1","storage":"1","varName2":"ID","name":"Store Member Info"},{"message":"1","varName":"msg","info":"0","storage":"1","varName2":"msgobj","name":"Store Message Info"},{"message":"1","varName":"msg","info":"4","storage":"1","varName2":"msgchannel","name":"Store Message Info"},{"storage":"3","varName":"msgchannel","filter":"author.id === '${tempVars(\"ID\")}'","max":"1","time":"10000","iftrue":"0","iftrueVal":"","iffalse":"2","iffalseVal":"17","storage2":"1","varName2":"await","name":"Await Response Call Action"},{"storage":"1","varName":"await","comparison":"1","value":"tempVars(\"random\")","iftrue":"0","iftrueVal":"","iffalse":"2","iffalseVal":"17","name":"Check Variable"},{"channel":"5","varName":"msgchannel","message":"✅ Вы успешно прошли проверку! Приятного общения!","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"name":"End Action Sequence"},{"channel":"5","varName":"msgchannel","message":"❎ Вы не прошли проверку. Вы были кикнуты с сервера.","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"member":"2","varName":"newmember","reason":"Не прошёл проверку","name":"Kick Member"},{"name":"End Action Sequence"}]}]